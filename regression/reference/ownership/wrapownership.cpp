// wrapownership.cpp
// This file is generated by Shroud 0.11.0. Do not edit.
// Copyright (c) 2017-2020, Lawrence Livermore National Security, LLC and
// other Shroud Project Developers.
// See the top-level COPYRIGHT file for details.
//
// SPDX-License-Identifier: (BSD-3-Clause)
//
#include "wrapownership.h"
#include <cstdlib>
#include "ownership.hpp"
#include "typesownership.h"

// splicer begin CXX_definitions
// splicer end CXX_definitions

extern "C" {

// splicer begin C_definitions
// splicer end C_definitions

// ----------------------------------------
// Function:  int * ReturnIntPtrRaw +deref(raw)
// Requested: c_native_*_result
// Match:     c_default
int * OWN_return_int_ptr_raw()
{
    // splicer begin function.return_int_ptr_raw
    int * SHC_rv = ReturnIntPtrRaw();
    return SHC_rv;
    // splicer end function.return_int_ptr_raw
}

// ----------------------------------------
// Function:  int * ReturnIntPtrScalar +deref(scalar)
// Requested: c_native_*_result
// Match:     c_default
int OWN_return_int_ptr_scalar()
{
    // splicer begin function.return_int_ptr_scalar
    int * SHC_rv = ReturnIntPtrScalar();
    return *SHC_rv;
    // splicer end function.return_int_ptr_scalar
}

// ----------------------------------------
// Function:  int * ReturnIntPtrPointer +deref(pointer)
// Requested: c_native_*_result
// Match:     c_default
int * OWN_return_int_ptr_pointer()
{
    // splicer begin function.return_int_ptr_pointer
    int * SHC_rv = ReturnIntPtrPointer();
    return SHC_rv;
    // splicer end function.return_int_ptr_pointer
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimRaw +deref(raw)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_raw(int * len)
{
    // splicer begin function.return_int_ptr_dim_raw
    int * SHC_rv = ReturnIntPtrDimRaw(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_raw
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimPointer +deref(pointer)+dimension(len)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_pointer(int * len)
{
    // splicer begin function.return_int_ptr_dim_pointer
    int * SHC_rv = ReturnIntPtrDimPointer(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_pointer
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimPointer +context(DSHC_rv)+deref(pointer)+dimension(len)
// Exact:     c_native_*_result_buf
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out_buf
// Match:     c_default
int * OWN_return_int_ptr_dim_pointer_bufferify(
    OWN_SHROUD_array *DSHC_rv, int * len)
{
    // splicer begin function.return_int_ptr_dim_pointer_bufferify
    int * SHC_rv = ReturnIntPtrDimPointer(len);
    DSHC_rv->cxx.addr.base = SHC_rv;
    DSHC_rv->cxx.idtor = 0;
    DSHC_rv->addr.base = SHC_rv;
    DSHC_rv->type = SH_TYPE_INT;
    DSHC_rv->elem_len = sizeof(int);
    DSHC_rv->rank = 1;
    DSHC_rv->shape[0] = *len;
    DSHC_rv->size = DSHC_rv->shape[0];
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_pointer_bufferify
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimAlloc +deref(allocatable)+dimension(len)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_alloc(int * len)
{
    // splicer begin function.return_int_ptr_dim_alloc
    int * SHC_rv = ReturnIntPtrDimAlloc(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_alloc
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimAlloc +context(DSHC_rv)+deref(allocatable)+dimension(len)
// Exact:     c_native_*_result_buf
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out_buf
// Match:     c_default
int * OWN_return_int_ptr_dim_alloc_bufferify(OWN_SHROUD_array *DSHC_rv,
    int * len)
{
    // splicer begin function.return_int_ptr_dim_alloc_bufferify
    int * SHC_rv = ReturnIntPtrDimAlloc(len);
    DSHC_rv->cxx.addr.base = SHC_rv;
    DSHC_rv->cxx.idtor = 0;
    DSHC_rv->addr.base = SHC_rv;
    DSHC_rv->type = SH_TYPE_INT;
    DSHC_rv->elem_len = sizeof(int);
    DSHC_rv->rank = 1;
    DSHC_rv->shape[0] = *len;
    DSHC_rv->size = DSHC_rv->shape[0];
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_alloc_bufferify
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimDefault +dimension(len)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_default(int * len)
{
    // splicer begin function.return_int_ptr_dim_default
    int * SHC_rv = ReturnIntPtrDimDefault(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_default
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimDefault +context(DSHC_rv)+dimension(len)
// Exact:     c_native_*_result_buf
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out_buf
// Match:     c_default
int * OWN_return_int_ptr_dim_default_bufferify(
    OWN_SHROUD_array *DSHC_rv, int * len)
{
    // splicer begin function.return_int_ptr_dim_default_bufferify
    int * SHC_rv = ReturnIntPtrDimDefault(len);
    DSHC_rv->cxx.addr.base = SHC_rv;
    DSHC_rv->cxx.idtor = 0;
    DSHC_rv->addr.base = SHC_rv;
    DSHC_rv->type = SH_TYPE_INT;
    DSHC_rv->elem_len = sizeof(int);
    DSHC_rv->rank = 1;
    DSHC_rv->shape[0] = *len;
    DSHC_rv->size = DSHC_rv->shape[0];
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_default_bufferify
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimRawNew +dimension(len)+owner(caller)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_raw_new(int * len)
{
    // splicer begin function.return_int_ptr_dim_raw_new
    int * SHC_rv = ReturnIntPtrDimRawNew(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_raw_new
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimPointerNew +deref(pointer)+dimension(len)+owner(caller)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_pointer_new(int * len)
{
    // splicer begin function.return_int_ptr_dim_pointer_new
    int * SHC_rv = ReturnIntPtrDimPointerNew(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_pointer_new
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimPointerNew +context(DSHC_rv)+deref(pointer)+dimension(len)+owner(caller)
// Exact:     c_native_*_result_buf
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out_buf
// Match:     c_default
int * OWN_return_int_ptr_dim_pointer_new_bufferify(
    OWN_SHROUD_array *DSHC_rv, int * len)
{
    // splicer begin function.return_int_ptr_dim_pointer_new_bufferify
    int * SHC_rv = ReturnIntPtrDimPointerNew(len);
    DSHC_rv->cxx.addr.base = SHC_rv;
    DSHC_rv->cxx.idtor = 2;
    DSHC_rv->addr.base = SHC_rv;
    DSHC_rv->type = SH_TYPE_INT;
    DSHC_rv->elem_len = sizeof(int);
    DSHC_rv->rank = 1;
    DSHC_rv->shape[0] = *len;
    DSHC_rv->size = DSHC_rv->shape[0];
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_pointer_new_bufferify
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimAllocNew +deref(allocatable)+dimension(len)+owner(caller)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_alloc_new(int * len)
{
    // splicer begin function.return_int_ptr_dim_alloc_new
    int * SHC_rv = ReturnIntPtrDimAllocNew(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_alloc_new
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimDefaultNew +dimension(len)+owner(caller)
// Requested: c_native_*_result
// Match:     c_default
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out
// Match:     c_default
int * OWN_return_int_ptr_dim_default_new(int * len)
{
    // splicer begin function.return_int_ptr_dim_default_new
    int * SHC_rv = ReturnIntPtrDimDefaultNew(len);
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_default_new
}

// ----------------------------------------
// Function:  int * ReturnIntPtrDimDefaultNew +context(DSHC_rv)+dimension(len)+owner(caller)
// Exact:     c_native_*_result_buf
// ----------------------------------------
// Argument:  int * len +hidden+intent(out)
// Requested: c_native_*_out_buf
// Match:     c_default
int * OWN_return_int_ptr_dim_default_new_bufferify(
    OWN_SHROUD_array *DSHC_rv, int * len)
{
    // splicer begin function.return_int_ptr_dim_default_new_bufferify
    int * SHC_rv = ReturnIntPtrDimDefaultNew(len);
    DSHC_rv->cxx.addr.base = SHC_rv;
    DSHC_rv->cxx.idtor = 2;
    DSHC_rv->addr.base = SHC_rv;
    DSHC_rv->type = SH_TYPE_INT;
    DSHC_rv->elem_len = sizeof(int);
    DSHC_rv->rank = 1;
    DSHC_rv->shape[0] = *len;
    DSHC_rv->size = DSHC_rv->shape[0];
    return SHC_rv;
    // splicer end function.return_int_ptr_dim_default_new_bufferify
}

// ----------------------------------------
// Function:  void createClassStatic
// Requested: c
// Match:     c_default
// ----------------------------------------
// Argument:  int flag +intent(in)+value
// Requested: c_native_scalar_in
// Match:     c_default
void OWN_create_class_static(int flag)
{
    // splicer begin function.create_class_static
    createClassStatic(flag);
    // splicer end function.create_class_static
}

// ----------------------------------------
// Function:  Class1 * getClassStatic +owner(library)
// Requested: c_shadow_*_result
// Match:     c_shadow_result
OWN_Class1 * OWN_get_class_static(OWN_Class1 * SHC_rv)
{
    // splicer begin function.get_class_static
    Class1 * SHCXX_rv = getClassStatic();
    SHC_rv->addr.base = SHCXX_rv;
    SHC_rv->idtor = 0;
    return SHC_rv;
    // splicer end function.get_class_static
}

/**
 * \brief Return pointer to new Class1 instance.
 *
 */
// ----------------------------------------
// Function:  Class1 * getClassNew +owner(caller)
// Requested: c_shadow_*_result
// Match:     c_shadow_result
// ----------------------------------------
// Argument:  int flag +intent(in)+value
// Requested: c_native_scalar_in
// Match:     c_default
OWN_Class1 * OWN_get_class_new(int flag, OWN_Class1 * SHC_rv)
{
    // splicer begin function.get_class_new
    Class1 * SHCXX_rv = getClassNew(flag);
    SHC_rv->addr.base = SHCXX_rv;
    SHC_rv->idtor = 1;
    return SHC_rv;
    // splicer end function.get_class_new
}

// Release library allocated memory.
void OWN_SHROUD_memory_destructor(OWN_SHROUD_capsule_data *cap)
{
    void *ptr = cap->addr.base;
    switch (cap->idtor) {
    case 0:   // --none--
    {
        // Nothing to delete
        break;
    }
    case 1:   // Class1
    {
        Class1 *cxx_ptr = reinterpret_cast<Class1 *>(ptr);
        delete cxx_ptr;
        break;
    }
    case 2:   // int
    {
        int *cxx_ptr = reinterpret_cast<int *>(ptr);
        free(cxx_ptr);
        break;
    }
    default:
    {
        // Unexpected case in destructor
        break;
    }
    }
    cap->addr.base = nullptr;
    cap->idtor = 0;  // avoid deleting again
}

}  // extern "C"
